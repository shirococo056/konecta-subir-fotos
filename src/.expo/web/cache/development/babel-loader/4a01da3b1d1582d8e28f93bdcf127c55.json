{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Adri\\\\Desktop\\\\subir fotos\\\\src\\\\components\\\\post\\\\actions.js\";\nimport { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport FirebaseContext from \"../../context/firebase\";\nimport UserContext from \"../../context/user\";\nexport default function Actions(_ref) {\n  var docId = _ref.docId,\n      totalLikes = _ref.totalLikes,\n      likedPhoto = _ref.likedPhoto,\n      handleFocus = _ref.handleFocus;\n\n  var _useContext = useContext(UserContext),\n      userId = _useContext.user.uid;\n\n  var _useState = useState(likedPhoto),\n      _useState2 = _slicedToArray(_useState, 2),\n      toggleLiked = _useState2[0],\n      setToggleLiked = _useState2[1];\n\n  var _useState3 = useState(totalLikes),\n      _useState4 = _slicedToArray(_useState3, 2),\n      likes = _useState4[0],\n      setLikes = _useState4[1];\n\n  var _useContext2 = useContext(FirebaseContext),\n      firebase = _useContext2.firebase,\n      FieldValue = _useContext2.FieldValue;\n\n  var handleToggleLiked = function handleToggleLiked() {\n    return _regeneratorRuntime.async(function handleToggleLiked$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setToggleLiked(function (toggleLiked) {\n              return !toggleLiked;\n            });\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(firebase.firestore().collection('photos').doc(docId).update({\n              likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\n            }));\n\n          case 3:\n            setLikes(function (likes) {\n              return toggleLiked ? likes - 1 : likes + 1;\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"flex justify-between p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, React.createElement(\"svg\", {\n    \"data-testid\": \"like-photo-\" + docId,\n    onClick: handleToggleLiked,\n    onKeyDown: function onKeyDown(event) {\n      if (event.key === 'Enter') {\n        handleToggleLiked();\n      }\n    },\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    tabIndex: 0,\n    className: \"w-8 mr-4 select-none cursor-pointer \" + (toggleLiked ? 'fill-red text-red-primary' : 'text-black-light'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 11\n    }\n  }, React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  })), React.createElement(\"svg\", {\n    \"data-testid\": \"focus-input-\" + docId,\n    onClick: handleFocus,\n    onKeyDown: function onKeyDown(event) {\n      if (event.key === 'Enter') {\n        handleFocus();\n      }\n    },\n    className: \"w-8 text-black-light select-none cursor-pointer\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    tabIndex: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  })))), React.createElement(\"div\", {\n    className: \"p-4 py-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, likes === 1 ? likes + \" like\" : likes + \" likes\")));\n}\nActions.propTypes = {\n  docId: PropTypes.string.isRequired,\n  totalLikes: PropTypes.number.isRequired,\n  likedPhoto: PropTypes.bool.isRequired,\n  handleFocus: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["C:/Users/Adri/Desktop/subir fotos/src/components/post/actions.js"],"names":["useState","useContext","PropTypes","FirebaseContext","UserContext","Actions","docId","totalLikes","likedPhoto","handleFocus","userId","user","uid","toggleLiked","setToggleLiked","likes","setLikes","firebase","FieldValue","handleToggleLiked","firestore","collection","doc","update","arrayRemove","arrayUnion","event","key","propTypes","string","isRequired","number","bool","func"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport FirebaseContext from '../../context/firebase';\nimport UserContext from '../../context/user';\n\nexport default function Actions({ docId, totalLikes, likedPhoto, handleFocus }) {\n  const {\n    user: { uid: userId }\n  } = useContext(UserContext);\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\n  const [likes, setLikes] = useState(totalLikes);\n  const { firebase, FieldValue } = useContext(FirebaseContext);\n\n  const handleToggleLiked = async () => {\n    setToggleLiked((toggleLiked) => !toggleLiked);\n\n    await firebase\n      .firestore()\n      .collection('photos')\n      .doc(docId)\n      .update({\n        likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\n      });\n\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\n  };\n\n  return (\n    <>\n      <div className=\"flex justify-between p-4\">\n        <div className=\"flex\">\n          <svg\n            data-testid={`like-photo-${docId}`}\n            onClick={handleToggleLiked}\n            onKeyDown={(event) => {\n              if (event.key === 'Enter') {\n                handleToggleLiked();\n              }\n            }}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            tabIndex={0}\n            className={`w-8 mr-4 select-none cursor-pointer ${\n              toggleLiked ? 'fill-red text-red-primary' : 'text-black-light'\n            }`}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n            />\n          </svg>\n          <svg\n            data-testid={`focus-input-${docId}`}\n            onClick={handleFocus}\n            onKeyDown={(event) => {\n              if (event.key === 'Enter') {\n                handleFocus();\n              }\n            }}\n            className=\"w-8 text-black-light select-none cursor-pointer\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            tabIndex={0}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n            />\n          </svg>\n        </div>\n      </div>\n      <div className=\"p-4 py-0\">\n        <p className=\"font-bold\">{likes === 1 ? `${likes} like` : `${likes} likes`}</p>\n      </div>\n    </>\n  );\n}\n\nActions.propTypes = {\n  docId: PropTypes.string.isRequired,\n  totalLikes: PropTypes.number.isRequired,\n  likedPhoto: PropTypes.bool.isRequired,\n  handleFocus: PropTypes.func.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}