{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Adri\\\\Desktop\\\\subir fotos\\\\src\\\\components\\\\profile\\\\header.js\";\nimport { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Skeleton from 'react-loading-skeleton';\nimport useUser from \"../../hooks/use-user\";\nimport { isUserFollowingProfile, toggleFollow } from \"../../services/firebase\";\nimport UserContext from \"../../context/user\";\nexport default function Header(_ref) {\n  var photosCount = _ref.photosCount,\n      followerCount = _ref.followerCount,\n      setFollowerCount = _ref.setFollowerCount,\n      _ref$profile = _ref.profile,\n      profileDocId = _ref$profile.docId,\n      profileUserId = _ref$profile.userId,\n      fullName = _ref$profile.fullName,\n      followers = _ref$profile.followers,\n      following = _ref$profile.following,\n      profileUsername = _ref$profile.username;\n\n  var _useContext = useContext(UserContext),\n      loggedInUser = _useContext.user;\n\n  var _useUser = useUser(loggedInUser == null ? void 0 : loggedInUser.uid),\n      user = _useUser.user;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFollowingProfile = _useState2[0],\n      setIsFollowingProfile = _useState2[1];\n\n  var activeBtnFollow = (user == null ? void 0 : user.username) && (user == null ? void 0 : user.username) !== profileUsername;\n\n  var handleToggleFollow = function handleToggleFollow() {\n    return _regeneratorRuntime.async(function handleToggleFollow$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setIsFollowingProfile(function (isFollowingProfile) {\n              return !isFollowingProfile;\n            });\n            setFollowerCount({\n              followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1\n            });\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(toggleFollow(isFollowingProfile, user.docId, profileDocId, profileUserId, user.userId));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var isLoggedInUserFollowingProfile = function isLoggedInUserFollowingProfile() {\n      var isFollowing;\n      return _regeneratorRuntime.async(function isLoggedInUserFollowingProfile$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(isUserFollowingProfile(user.username, profileUserId));\n\n            case 2:\n              isFollowing = _context2.sent;\n              setIsFollowingProfile(!!isFollowing);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    if (user != null && user.username && profileUserId) {\n      isLoggedInUserFollowingProfile();\n    }\n  }, [user == null ? void 0 : user.username, profileUserId]);\n  return React.createElement(\"div\", {\n    className: \"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, React.createElement(\"div\", {\n    className: \"container flex justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, profileUsername ? React.createElement(\"img\", {\n    className: \"rounded-full h-16 w-16 md:h-20 lg:h-40 md:w-20 lg:w-40 flex\",\n    alt: (user == null ? void 0 : user.username) + \" profile picture\",\n    src: \"/images/avatars/\" + profileUsername + \".jpg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }) : React.createElement(\"img\", {\n    className: \"rounded-full h-16 w-16 md:h-20 lg:h-40 md:w-20 lg:w-40 flex\",\n    alt: profileUsername + \" profile picture\",\n    src: \"/images/avatars/\" + profileUsername + \".jpg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  })), React.createElement(\"div\", {\n    className: \"flex items-center justify-center flex-col col-span-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, React.createElement(\"div\", {\n    className: \"container flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, React.createElement(\"p\", {\n    className: \"text-2xl mr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, profileUsername), activeBtnFollow && React.createElement(\"button\", {\n    className: \"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\",\n    type: \"button\",\n    onClick: handleToggleFollow,\n    onKeyDown: function onKeyDown(event) {\n      if (event.key === 'Enter') {\n        handleToggleFollow();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, isFollowingProfile ? 'Unfollow' : 'Follow')), React.createElement(\"div\", {\n    className: \"container flex mt-4 flex-col lg:flex-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, !followers || !following ? React.createElement(Skeleton, {\n    count: 1,\n    width: 677,\n    height: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(\"p\", {\n    className: \"mr-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, React.createElement(\"span\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, photosCount), \" photos\"), React.createElement(\"p\", {\n    className: \"mr-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, React.createElement(\"span\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, followerCount), \" \", followerCount === 1 ? \"follower\" : \"followers\"), React.createElement(\"p\", {\n    className: \"mr-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, React.createElement(\"span\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, following.length), \" following\"))), React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, React.createElement(\"p\", {\n    className: \"font-medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, !fullName ? React.createElement(Skeleton, {\n    count: 1,\n    height: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 51\n    }\n  }) : fullName))));\n}\nHeader.propTypes = {\n  photosCount: PropTypes.number.isRequired,\n  followerCount: PropTypes.number.isRequired,\n  setFollowerCount: PropTypes.func.isRequired,\n  profile: PropTypes.shape({\n    docId: PropTypes.string,\n    userId: PropTypes.string,\n    fullName: PropTypes.string,\n    username: PropTypes.string,\n    followers: PropTypes.array,\n    following: PropTypes.array\n  }).isRequired\n};","map":{"version":3,"sources":["C:/Users/Adri/Desktop/subir fotos/src/components/profile/header.js"],"names":["useState","useEffect","useContext","PropTypes","Skeleton","useUser","isUserFollowingProfile","toggleFollow","UserContext","Header","photosCount","followerCount","setFollowerCount","profile","profileDocId","docId","profileUserId","userId","fullName","followers","following","profileUsername","username","loggedInUser","user","uid","isFollowingProfile","setIsFollowingProfile","activeBtnFollow","handleToggleFollow","isLoggedInUserFollowingProfile","isFollowing","event","key","length","propTypes","number","isRequired","func","shape","string","array"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/img-redundant-alt */\nimport { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Skeleton from 'react-loading-skeleton';\nimport useUser from '../../hooks/use-user';\nimport { isUserFollowingProfile, toggleFollow } from '../../services/firebase';\nimport UserContext from '../../context/user';\n\nexport default function Header({\n  photosCount,\n  followerCount,\n  setFollowerCount,\n  profile: {\n    docId: profileDocId,\n    userId: profileUserId,\n    fullName,\n    followers,\n    following,\n    username: profileUsername\n  }\n}) {\n  const { user: loggedInUser } = useContext(UserContext);\n  const { user } = useUser(loggedInUser?.uid);\n  const [isFollowingProfile, setIsFollowingProfile] = useState(false);\n  const activeBtnFollow = user?.username && user?.username !== profileUsername;\n\n  const handleToggleFollow = async () => {\n    setIsFollowingProfile((isFollowingProfile) => !isFollowingProfile);\n    setFollowerCount({\n      followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1\n    });\n    await toggleFollow(isFollowingProfile, user.docId, profileDocId, profileUserId, user.userId);\n  };\n\n  useEffect(() => {\n    const isLoggedInUserFollowingProfile = async () => {\n      const isFollowing = await isUserFollowingProfile(user.username, profileUserId);\n      setIsFollowingProfile(!!isFollowing);\n    };\n\n    if (user?.username && profileUserId) {\n      isLoggedInUserFollowingProfile();\n    }\n  }, [user?.username, profileUserId]);\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\n      <div className=\"container flex justify-center items-center\">\n        {profileUsername ? (\n          <img\n            className=\"rounded-full h-16 w-16 md:h-20 lg:h-40 md:w-20 lg:w-40 flex\"\n            alt={`${user?.username} profile picture`}\n            src={`/images/avatars/${profileUsername}.jpg`}\n          />\n        ) : (\n          <img\n            className=\"rounded-full h-16 w-16 md:h-20 lg:h-40 md:w-20 lg:w-40 flex\"\n            alt={`${profileUsername} profile picture`}\n            src={`/images/avatars/${profileUsername}.jpg`}\n          />\n        )}\n      </div>\n      <div className=\"flex items-center justify-center flex-col col-span-2\">\n        <div className=\"container flex items-center\">\n          <p className=\"text-2xl mr-4\">{profileUsername}</p>\n          {activeBtnFollow && (\n            <button\n              className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n              type=\"button\"\n              onClick={handleToggleFollow}\n              onKeyDown={(event) => {\n                if (event.key === 'Enter') {\n                  handleToggleFollow();\n                }\n              }}\n            >\n              {isFollowingProfile ? 'Unfollow' : 'Follow'}\n            </button>\n          )}\n        </div>\n        <div className=\"container flex mt-4 flex-col lg:flex-row\">\n          {!followers || !following ? (\n            <Skeleton count={1} width={677} height={24} />\n          ) : (\n            <>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{photosCount}</span> photos\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{followerCount}</span>\n                {` `}\n                {followerCount === 1 ? `follower` : `followers`}\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{following.length}</span> following\n              </p>\n            </>\n          )}\n        </div>\n        <div className=\"container mt-4\">\n          <p className=\"font-medium\">{!fullName ? <Skeleton count={1} height={24} /> : fullName}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\nHeader.propTypes = {\n  photosCount: PropTypes.number.isRequired,\n  followerCount: PropTypes.number.isRequired,\n  setFollowerCount: PropTypes.func.isRequired,\n  profile: PropTypes.shape({\n    docId: PropTypes.string,\n    userId: PropTypes.string,\n    fullName: PropTypes.string,\n    username: PropTypes.string,\n    followers: PropTypes.array,\n    following: PropTypes.array\n  }).isRequired\n};\n"]},"metadata":{},"sourceType":"module"}